---
title: JavaScriptï¼šæ³¨é‡é—œæ³¨é»çš„åˆ†é›¢
date: 2023-11-29 09:44:29
tags:
  - [SoC]
  - [MVC]
  - [Design Patterns]
  - [Clean Code]
  - [Refactoring]
categories:
  - [JavaScript]
  - [Software Engineering]
description: é€éé—œæ³¨é»åˆ†é›¢çš„è¨­è¨ˆæ–¹å¼ï¼Œå¯é¡¯è‘—æé«˜ç³»çµ±æ•´é«”çš„å¯ç¶­è­·æ€§ã€‚
---

![BlogèƒŒæ™¯åœ–](https://res.cloudinary.com/dseg0uwc9/image/upload/f_auto,q_auto,w_1200,h_675,c_fill/v1767590450/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%B0%88%E7%94%A8/%E9%83%A8%E8%90%BD%E6%A0%BC_JavaScript_2_o4jnzo.jpg)

<strong>ğŸŒŸ é—œæ³¨é»åˆ†é›¢ï¼ˆSeparation of Concernsï¼ŒSoCï¼‰</strong>

---

## å®šç¾©

- é—œæ³¨é»åˆ†é›¢æ˜¯ä¸€ç¨®è»Ÿé«”è¨­è¨ˆåŸå‰‡ï¼Œå°‡ä¸€å€‹ç³»çµ±åŠƒåˆ†ç‚ºä¸åŒçš„æ¨¡çµ„æˆ–å…ƒä»¶ï¼Œæ¯å€‹æ¨¡çµ„æˆ–å…ƒä»¶é›†ä¸­æ–¼è§£æ±ºç‰¹å®šçš„é—œæ³¨é»æˆ–ä»»å‹™ï¼Œä»¥æé«˜ç³»çµ±çš„å¯æ“ä½œæ€§ã€å¯ç¶­è­·æ€§ã€å¯æ“´å±•æ€§å’Œå¯é‡ç”¨æ€§ã€‚è©²åŸå‰‡ä¸»å¼µå°‡ä¸åŒå±¤é¢çš„é—œæ³¨é»ç¨ç«‹é–‹ç™¼ï¼Œä½¿å¾—ä¿®æ”¹ä¸€å€‹é—œæ³¨é»ä¸æœƒå½±éŸ¿å…¶ä»–é—œæ³¨é»ã€‚
- å‚³çµ±çš„ç¶²é é–‹ç™¼ä¸­ï¼Œé€šå¸¸æœƒå°‡ç¶²é çš„é–‹ç™¼å€åˆ†ç‚º HTMLã€CSSã€JavaScript ä¸‰å€‹æŠ€è¡“é ˜åŸŸï¼Œä¸¦åˆ†åˆ¥å°‡å®ƒå€‘æ‹†åˆ†æˆä¸åŒçš„æª”æ¡ˆï¼Œä»¥è² è²¬å„è‡ªçš„é ˜åŸŸã€‚
  - HTMLï¼š èªæ„å±¤ï¼Œè² è²¬ç¶²é çµæ§‹å’Œæ•´é«”èªæ„ã€‚
  - CSSï¼š æ¨£å¼å±¤ï¼Œè² è²¬ç¶²é å¤–è§€å’Œæ¨£å¼ã€‚
  - JavaScriptï¼š é‚è¼¯å±¤ï¼Œè² è²¬è™•ç†äº‹ä»¶é‚è¼¯å’Œå‹•æ…‹è¡Œç‚ºã€‚
- é¿å…å¯«è¡Œå…§æ¨£å¼(inline style)è·Ÿè¡Œå…§è…³æœ¬(inline script)é€ æˆå½¼æ­¤é ˜åŸŸçš„å¹²æ¶‰ã€‚

```htmlembedded=
<h1 style="color:red;font-size:46px;"  onclick="alert('Hi')">
  Hello World
</h1>
```

---

- é—œæ³¨é»åˆ†é›¢å¯«æ³•
- HTML(èªæ„å±¤)ï¼š

```htmlembedded=
<h1>
  Hello World
</h1>
```

- CSS(æ¨£å¼å±¤)

```css=
h1 {
  color: red;
  font-size: 46px;
}
```

- JavaScriptï¼ˆé‚è¼¯å±¤ï¼‰

```javascript=
// script.js
document.addEventListener('DOMContentLoaded', function () {
  const header = document.querySelector('h1');
  header.addEventListener('click', function () {
    alert('Hi');
  });
});
```

## é—œæ³¨é»åˆ†é›¢- MVC æ¦‚å¿µ

- Modelï¼š
  - è² è²¬è™•ç†æ•¸æ“šçš„é‚è¼¯ï¼ŒåŒ…æ‹¬æ•¸æ“šçš„å­˜å„²ã€æª¢ç´¢ã€æ›´æ–°å’Œåˆªé™¤ç­‰æ“ä½œã€‚
- Viewï¼š
  - è² è²¬å‘ˆç¾ç•Œé¢ï¼Œå³ç”¨æˆ¶ç•Œé¢çš„æ¸²æŸ“å’Œé¡¯ç¤ºã€‚
- Controllerï¼š
  - è² è²¬æ¥æ”¶ç”¨æˆ¶çš„è¼¸å…¥ï¼Œè™•ç†æ¥­å‹™é‚è¼¯ï¼Œç„¶å¾Œæ›´æ–°æ¨¡å‹å’Œè¦–åœ–ã€‚

---

- å–®ç´”ä¾è³´ Controller å½±éŸ¿ View çš„ç¯€é»ï¼Œä½¿å¾— View ä¸Šå‘ˆç¾çš„ç¯€é»é›£ä»¥ç¶­è­·ã€‚
  ![å‚³çµ±ç¶²é çµæ§‹](https://res.cloudinary.com/dseg0uwc9/image/upload/f_auto,q_auto,w_auto,h_675,c_fill/v1708007052/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%B0%88%E7%94%A8/JS-4/%E5%82%B3%E7%B5%B1%E7%B6%B2%E9%A0%81%E7%B5%90%E6%A7%8B_bkkbwr.jpg)

---

æˆ‘å€‘å¸Œæœ›é€é MVC çš„æ¦‚å¿µè®“ç¶­è­·ä¸Šæ›´ç‚ºæ–¹ä¾¿ã€‚

- ä½¿ç”¨è€…èˆ‡ä»‹é¢äº’å‹• -> Controller è™•ç†ç¶²é é‚è¼¯ -> Controller èª¿ç”¨ Model æ–¹æ³•ï¼Œå½±éŸ¿ Model è³‡æ–™(æ–°å¢æˆ–ä¿®æ”¹) -> ä¿®æ”¹å®Œ Controller å†æ¬¡å‘¼å« View æ¸²æŸ“çš„æ–¹æ³• -> View æ ¹æ“šæ›´æ–°å¾Œçš„è³‡æ–™é‡æ–°æ¸²æŸ“
- é”åˆ° View åŠ Model é€é Controller é€²è¡Œå½¼æ­¤çš„æºé€šè€Œä¸ç›´æ¥äº’ç›¸å½±éŸ¿ã€‚
  ![é—œæ³¨é»åˆ†é›¢-ç¶²é çµæ§‹](https://res.cloudinary.com/dseg0uwc9/image/upload/f_auto,q_auto,w_auto,h_675,c_fill/v1/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%B0%88%E7%94%A8/JS-4/%E9%97%9C%E6%B3%A8%E9%BB%9E%E5%88%86%E9%9B%A2%E7%89%88%E6%9C%AC-%E7%B6%B2%E9%A0%81%E7%B5%90%E6%A7%8B_unos1s?_a=BAMAAAhK0)
- é€éä»¥ä¸‹æµç¨‹æ­é…ç¨‹å¼ç¢¼é€²è¡Œèªªæ˜
  1. ç”¨æˆ¶èˆ‡ç•Œé¢äº’å‹•ï¼Œè§¸ç™¼ Controller çš„ç›¸æ‡‰æ–¹æ³•ã€‚
     - ä½¿ç”¨è€…åœ¨ç€è¦½å™¨é»æ“Šç§»é™¤ã€‚
  2. Controller æ ¹æ“šç”¨æˆ¶çš„è¼¸å…¥æ“ä½œ Modelã€‚
     - æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶è§¸ç™¼äº† removeData æ–¹æ³•ï¼Œé€™æ˜¯ Controller ä¸­çš„ä¸€å€‹ç›¸æ‡‰æ–¹æ³•ã€‚
  3. Model çš„ç‹€æ…‹ç™¼ç”Ÿè®ŠåŒ–ã€‚
     - removeData æ–¹æ³•ä¸­ä½¿ç”¨äº† splice æ–¹æ³•ä¾†ç§»é™¤è³‡æ–™é™£åˆ— data ä¸­çš„ç‰¹å®šé …ç›®ï¼Œå³åˆªé™¤äº†ä¸€å€‹è³‡æ–™é …ã€‚
  4. Controller å¾—çŸ¥ Model ç‹€æ…‹çš„è®ŠåŒ–ï¼Œé€šçŸ¥ç›¸æ‡‰çš„ Viewã€‚
     - removeData æ–¹æ³•åŸ·è¡Œå®Œç•¢å¾Œï¼Œç«‹å³å‘¼å«äº† render æ–¹æ³•ï¼Œé€™æ˜¯é€šçŸ¥ View éƒ¨åˆ†ã€‚
  5. View å¾ Model ä¸­ç²å–æœ€æ–°çš„æ•¸æ“šã€‚
     - render æ–¹æ³•å…§éƒ¨é‡æ–°éæ­·è³‡æ–™é™£åˆ—ï¼Œå‰µå»ºæ–°çš„ HTML å…ƒç´ ï¼Œä¸¦æ›´æ–° DOM ä¸­çš„å…§å®¹ã€‚
  6. View ä½¿ç”¨é€™äº›æ•¸æ“šæ›´æ–°ç•Œé¢ã€‚
     - æ–°çš„ HTML å…ƒç´ è¢«æ³¨å…¥åˆ° DOM ä¸­ï¼Œæ­¤æ™‚ç•Œé¢ä¸Šçš„åˆ—è¡¨å·²ç¶“æ›´æ–°ï¼Œåæ˜ äº†è³‡æ–™è®ŠåŒ–ã€‚

{% iframe https://codepen.io/gwhvusel-the-builder/embed/LYqevQL?default-tab=html%2Cresult %}

ç¨‹å¼ç¢¼ï¼š

```javascript=
const component = {
  // Modelçš„éƒ¨åˆ†
  // --------
  data: [
    'é€™æ˜¯ç¬¬ä¸€å¥è©±',
    'é€™æ˜¯ç¬¬äºŒå¥è©±',
    'é€™æ˜¯ç¬¬ä¸‰å¥è©±'
  ],
  removeData(id) {
    this.data.splice(id, 1);
    this.render();
  },
  // --------

  // Viewçš„éƒ¨åˆ†
  // --------
  renderList() {
    const list = document.querySelector('.component ul');
    let content = '';
    this.data.forEach((item, i) => {
      content = `${content}<li>${item} <button type="button" class="btn" data-id="${i}">ç§»é™¤</button></li>`;
    });
    list.innerHTML = content;
  },
  addEventListeners() {
    const btns = document.querySelectorAll('.btn');
    btns.forEach(btn => btn.addEventListener('click', (e) => {
      const id = e.target.dataset.id;
      this.removeData(id);
    }));
  },
  // --------

  // Controller
  // --------
  render() { // æ¸²æŸ“æ–¹æ³•
    this.renderList();
    this.addEventListeners();
  },
  init() {
    this.render();
  }
  // --------
};
component.init();
```
