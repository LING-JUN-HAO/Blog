---
title: JavaScriptï¼šæŒæ¡ç®­é ­å‡½å¼ï¼Œå„ªé›…ç°¡ç´„çš„ç¨‹å¼å¯«ä½œ
date: 2023-11-29 01:02:36
tags:
  - [Arrow Function]
  - [this]
  - [Lexical Scoping]
  - [Syntactic Sugar]
  - [Callback Function]
categories:
  - [JavaScript]
  - [å‰ç«¯é–‹ç™¼]
description: æ·±å…¥è§£æES6ç®­é ­å‡½æ•¸ï¼šæ­é–‹èˆ‡å‚³çµ±å‡½å¼çš„å·®ç•°ã€‚
---

![BlogèƒŒæ™¯åœ–](https://res.cloudinary.com/dseg0uwc9/image/upload/f_auto,q_auto,w_1200,h_675,c_fill/v1767339166/%E9%83%A8%E8%90%BD%E6%A0%BC%E5%B0%88%E7%94%A8/%E7%AE%AD%E9%A0%AD%E5%87%BD%E5%BC%8F_omu6aa.jpg)

<strong>ğŸŒŸ ç®­é ­å‡½æ•¸æ˜¯ ES6 çš„æ–°èªæ³•ï¼Œèƒ½å¤ æœ‰æ•ˆç¸®çŸ­å‚³çµ±å‡½å¼å¯«æ³•</strong>

---

## å‚³çµ±å‡½å¼ VS ç®­é ­å‡½å¼æƒ…å¢ƒèªªæ˜

- ç›´æ¥é€éä¸€å€‹ä¾‹å­ä¾†é€²è¡Œæ¯”è¼ƒæ›´å¿«ç­è§£ï¼Œé€éç®­é ­å‡½å¼ç¸®çŸ­å‚³çµ±å‡½å¼ã€‚
- æƒ…å¢ƒï¼šæˆ‘æƒ³å¿«é€Ÿå°‡é™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ éƒ½è®Šæˆå…©å€(map å°åŸé™£åˆ—é€²è¡Œæ“ä½œç”¢ç”Ÿä¸€å€‹æ–°çš„é™£åˆ—)ã€‚

### å‚³çµ±å‡½å¼

```javascript=
const arr = [1, 2, 3, 4, 5];
const resultarr = arr.map(function(item){
  return item * 2
})
console.log(resultarr)
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
[2,4,6,8,10]
```

---

### ç®­é ­å‡½å¼

- æ–¹æ³• 1ï¼šçœç•¥ function æ›¿æ›æˆç®­é ­å‡½æ•¸çš„æ–¹å¼ã€‚

```javascript=
const arr = [1, 2, 3, 4, 5];
const resultarr = arr.map((item) =>{
  return item * 2
})
console.log(resultarr)
```

- æ–¹æ³• 2ï¼šçœç•¥ function + çœç•¥ returnã€‚

```javascript=
const arr = [1, 2, 3, 4, 5];
const resultarr = arr.map((item) => (item * 2))
console.log(resultarr)
```

- æ–¹æ³• 3ï¼šç•¶ç¢ºå®šåƒ…æœ‰ä¸€å€‹åƒæ•¸(item)ï¼Œä¸å¯ç‚ºç©ºæˆ–è¶…éä¸€å€‹åƒæ•¸ï¼Œå¯ä»¥çœç•¥æˆä»¥ä¸‹å¯«æ³•ã€‚

```javascript=
const arr = [1, 2, 3, 4, 5];
const resultarr = arr.map(item => item * 2)
console.log(resultarr)
```

---

## this æŒ‡å‘å·®åˆ¥-ç®­é ­å‡½å¼æ²’æœ‰è‡ªå·±çš„ this æŒ‡å‘

- ç•¶çœ‹åˆ° this çš„æ™‚å€™è‡ªå‹•å¿½è¦–åŒ…è¦†ä»–çš„å‡½å¼

## å‚³çµ±å‡½å¼çš„ this æŒ‡å‘

```javascript=
var name = 'å…¨åŸŸ'
const person = {
  name: 'å°æ˜',
  callName() {
    setTimeout(function () {
      console.log(this.name); // 2
    });
  },
}
person.callName();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
å…¨åŸŸ
```

### æ¡ˆä¾‹ 1.å›èª¿å‡½æ•¸é‡åˆ°ç®­é ­å‡½å¼

- ç•¶çœ‹åˆ° this çš„æ™‚å€™è‡ªå‹•å¿½è¦–åŒ…è¦†ä»–çš„å‡½å¼(setTimeout)ï¼Œå¯ä»¥æƒ³åƒæˆ this.name åˆè®Šæˆåœ¨ callName å‡½å¼ä¹‹ä¸‹ï¼Œå› æ­¤é€™æ™‚å€™ this.name å°±æœƒå¾å…¨åŸŸè®Šæ•¸è®ŠæˆæŒ‡å‘ person ç‰©ä»¶ä¸‹çš„ nameã€‚

```javascript=
var name = 'å…¨åŸŸ'
const person = {
  name: 'å°æ˜',
  callName() {
    setTimeout(() => {
      console.log(this.name); // 2
    });
  },
}
person.callName();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
å°æ˜
```

### æ¡ˆä¾‹ 2.å‚³çµ±å‡½å¼é‡åˆ°ç®­é ­å‡½å¼(å–®å±¤)

- ä½¿ç”¨ç®­é ­å‡½å¼æœƒç›´æ¥è·³å‡ºç•¶å‰åŒ…è¦†çš„ function(callName)ï¼Œä¹Ÿå°±æ˜¯ç›®å‰ä¸¦æ²’æœ‰äººèª¿ç”¨ person æœ¬èº«ï¼Œå› æ­¤ this æœƒæŒ‡å‘å…¨åŸŸã€‚

```javascript=
var name = 'å…¨åŸŸ'
const person = {
  name: 'å°æ˜',
  callName: () => {
    console.log(this.name);
  },
}
person.callName();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
å…¨åŸŸ
```

---

### æ¡ˆä¾‹ 3.å‚³çµ±å‡½å¼é‡åˆ°ç®­é ­å‡½å¼(é›™å±¤)

- this.name è·³è„«åŒ…è¦†ä»–çš„ callName å‡½å¼ï¼Œè®Šæˆç›´æ¥åœ¨ callMe ä¸‹é¢ï¼Œå› æ­¤ callMe è¢« person å‘¼å«ä½¿ç”¨ï¼Œthis å°‡æœƒæŒ‡å‘ personã€‚

```javascript=
var name = 'å…¨åŸŸ'
const person = {
  name: 'å°æ˜',
  callMe() {
    const callName = () => {
      console.log(this.name); // è«‹å°‹æ‰¾ç®­é ­æ‰€åœ¨çš„ä½œç”¨åŸŸç‚ºä½•ï¼Ÿ
    };
    callName();
  }
}
person.callMe();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
å°æ˜
```

## this æŒ‡å‘å¯¦æˆ°ä½œæ³•ï¼Œè®“ this å–å¾—æ­£ç¢ºçš„å€¼

- å›èª¿å‡½å¼ä½¿ç”¨å‚³çµ±å‡½å¼çš„å¯«æ³•ä¸€èˆ¬æŒ‡å‘å…¨åŸŸ

```javascript=
var someone = 'å…¨åŸŸ';
var obj4 = {
  someone: 'ç‰©ä»¶ 4',
  fn() {
    setTimeout(function () {
      console.log(this.someone);
    });
  }
}
obj4.fn();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
å…¨åŸŸ
```

### ä¿®æ”¹æ–¹å¼ 1.åˆ©ç”¨å…¶ä»–è®Šæ•¸å–ä»£ç•¶å‰ this

- é€éåœ¨ fn ä½¿ç”¨è®Šæ•¸å„²å­˜ç•¶å‰ this ä½ç½®æŒ‡å‘ fnï¼Œåœ¨å›èª¿å‡½å¼ä¸­ä½¿ç”¨è©²è®Šæ•¸ä»¥è®“ this æŒ‡å‘ obj4ï¼Œå–å¾—ç‰©ä»¶ 4 çš„å€¼ã€‚

```javascript=
var someone = 'å…¨åŸŸ';
var obj4 = {
  someone: 'ç‰©ä»¶ 4',
  fn() {
    const that = this
    setTimeout(function () {
      console.log(that.someone);
    });
  }
}
obj4.fn();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
ç‰©ä»¶ 4
```

### ä¿®æ”¹æ–¹å¼ 2.ä½¿ç”¨ç®­é ­å‡½æ•¸

- é€éç®­é ­å‡½æ•¸å¿½è¦–å‡½å¼ setTimeoutï¼Œè®“ this è®Šæˆåœ¨ fn å‡½å¼ä¸‹ï¼Œthis å°±æœƒæŒ‡å‘ä½¿ç”¨ fn çš„ obj4ï¼Œé€²è€Œå–å¾— obj4 ä¸‹çš„ someoneã€‚

```javascript=
var someone = 'å…¨åŸŸ';
var obj4 = {
  someone: 'ç‰©ä»¶ 4',
  fn() {
    setTimeout(() => {
      console.log(this.someone);
    });
  }
}
obj4.fn();
```

é¡¯ç¤ºå¦‚ä¸‹ï¼š

```javascript=
ç‰©ä»¶ 4
```
